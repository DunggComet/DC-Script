-------------------------------------------------------------------------
-------------------------------------------------------------------------

function inputs()
  local input = {}
  local configFile = gg.EXT_CACHE_DIR .. '/' .. gg.getFile():match('') .. 'Battle-Dragons-Speed.text'
  local data = loadfile(configFile)
  if data ~= nil then data = data() end

  input = gg.prompt({
    '🏃‍5min to 0s Speed',
    '🏃‍15min to 0s Speed',
    '🏃‍30min to 0s Speed',
    '🏃‍1h to 0s Speed',
    '🏃‍1h 20min to 0s Speed',
    '🏃‍3h to 0s Speed',
    '🏃‍6h 40min to 0s Speed',
    '🏃‍8h to 0s Speed',
    '●Anti Reload●',
    '●Return to Main Menu●'
  }, data, {'checkbox','checkbox','checkbox','checkbox','checkbox','checkbox','checkbox','checkbox','checkbox','checkbox'})

  if input == nil then return end
  gg.saveVariable(input, configFile)

  local function commonSearch(value)
    gg.setRanges(gg.REGION_CODE_APP)
    gg.setVisible(false)
    gg.searchNumber(':error', gg.TYPE_BYTE, false, gg.SIGN_EQUAL, 0, -1)
    gg.getResults(100000)
    gg.editAll('0', gg.TYPE_BYTE)
    gg.clearResults()
    gg.sleep(5000)

    gg.setRanges(gg.REGION_C_ALLOC)
    gg.searchNumber('2;' .. value .. ';0::', gg.TYPE_DWORD, false, gg.SIGN_EQUAL, 0, -1)
    gg.refineNumber('2;' .. value .. '::', gg.TYPE_DWORD)
    gg.refineNumber(value, gg.TYPE_DWORD)
    gg.getResults(10000)
    gg.editAll('0', gg.TYPE_DWORD)
    gg.clearResults()
    gg.sleep(20000)
  end

  if input[1] then commonSearch(300) end
  if input[2] then commonSearch(900) end
  if input[3] then commonSearch(1800) end
  if input[4] then commonSearch(3600) end
  if input[5] then commonSearch(4800) end
  if input[6] then commonSearch(10800) end
  if input[7] then commonSearch(24000) end
  if input[8] then commonSearch(28800) end

  if input[9] then
    gg.setRanges(gg.REGION_CODE_APP)
    gg.searchNumber(':error', gg.TYPE_BYTE, false, gg.SIGN_EQUAL, 0, -1)
    gg.getResults(100000)
    gg.editAll('0', gg.TYPE_BYTE)
    gg.clearResults()
    gg.sleep(20000)
  end

  if input[10] then
    L = gg.makeRequest('https://raw.githubusercontent.com/DunggKR/DC-Script/main/DC.lua', nil, 'https://dragoncitytips.com/scripts').content
    if not L then
      gg.alert('SERVER: Allow Internet Connection...')
    else
      pcall(load(L))
    end
  end
end

-------------------------------------------------------------------------
gg.setVisible(true)
while true do
  if gg.isVisible() then
    gg.setVisible(false)
    inputs()
  end
end
-------------------------------------------------------------------------
